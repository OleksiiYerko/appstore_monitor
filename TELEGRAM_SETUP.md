# Настройка Telegram уведомлений

## Шаг 1: Создание бота

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Следуйте инструкциям:
   - Введите имя бота (например, "App Store Monitor")
   - Введите username бота (должен заканчиваться на 'bot', например "appstore_monitor_bot")
4. BotFather выдаст вам токен бота (выглядит как `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

## Шаг 2: Получение Chat ID

### Для личного чата:
1. Начните чат с вашим ботом
2. Отправьте любое сообщение боту
3. Откройте в браузере: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
4. Найдите в ответе `"chat":{"id":123456789}` - это ваш Chat ID

### Для группового чата:
1. Добавьте бота в группу
2. Отправьте сообщение в группу
3. Откройте в браузере: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
4. Найдите в ответе `"chat":{"id":-123456789}` - это Chat ID группы (отрицательное число)

## Шаг 3: Настройка конфигурации

Отредактируйте файл `data/config/telegram_config.json`:

```json
{
  "TG_TOKEN": "123456789:ABCdefGHIjklMNOpqrsTUVwxyz",
  "TG_CHAT_ID": "123456789",
  "TG_TOPIC_ID": null
}
```

**Где:**
- `TG_TOKEN` - токен вашего бота от BotFather
- `TG_CHAT_ID` - ID чата (положительное для личного, отрицательное для группы)
- `TG_TOPIC_ID` - ID топика (для форумов), оставьте `null` для обычных чатов

## Шаг 4: Проверка настройки

После настройки перезапустите скрипт мониторинга:

```bash
# Остановите текущий процесс
pkill -f "main.py search"

# Запустите заново
nohup python3 main.py search > appstore_monitor.log 2>&1 &
```

## Шаг 5: Проверка логов

Проверьте, что уведомления работают:

```bash
tail -f data/logs/appstore_monitor.log
```

Вы должны увидеть сообщения об отправке в Telegram вместо "⚠️ Токен Telegram не настроен".

## Устранение проблем

1. **Бот не отвечает**: Убедитесь, что вы начали чат с ботом
2. **Ошибка 403**: Проверьте правильность токена
3. **Ошибка 400**: Проверьте правильность Chat ID
4. **Сообщения не приходят**: Убедитесь, что бот не заблокирован в чате 